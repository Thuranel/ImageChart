"use strict";angular.module("imageChartApp",[]),angular.module("imageChartApp").controller("MainCtrl",["$scope",function(a){a.init=function(){var a={avatar_size:50,patchVersion:"6.20.1",chart_dimension:{chart_width:960,chart_height:500},margin:{top:20,right:20,bottom:30,left:30},domain_margin:2,max_zoom:10},g=a.margin,h=a.chart_dimension.chart_width-g.left-g.right,i=a.chart_dimension.chart_height-g.top-g.bottom,j=d3.select("#chart").append("svg").attr("viewBox","0 0 "+(h+g.left+g.right)+" "+(i+g.top+g.bottom)).append("g").attr("transform","translate("+g.left+","+g.top+")");j.append("svg:rect").attr("width",h).attr("height",i).style("fill","none").style("pointer-events","all"),j.append("defs").append("svg:clipPath").attr("id","clip").append("svg:rect").attr("id","clip-rect").attr("x","0").attr("y","0").attr("width",h).attr("height",i);d3.json("data.json",function(g,k){function l(){var a=x.translate(),b=x.scale(),c=Math.min(0,Math.max(h*(1-b),a[0])),d=Math.min(0,Math.max(i*(1-b),a[1]));x.translate([c,d]),j.select(".x.axis").call(t),j.select(".y.axis").call(u),j.selectAll("#chartPoint").attr("transform",m)}function m(a){return"translate("+r(a.general.winPercent)+","+s(a.general.playPercent)+")"}if(g)throw g;var n=d3.min(k,function(a){return a.general.winPercent}),o=d3.max(k,function(a){return a.general.winPercent}),p=d3.min(k,function(a){return a.general.playPercent}),q=d3.max(k,function(a){return a.general.playPercent}),r=d3.scale.linear().range([0,h]).domain([n-a.domain_margin,o+a.domain_margin]),s=d3.scale.linear().range([i,0]).domain([p-a.domain_margin,q+a.domain_margin]),t=d3.svg.axis().scale(r).orient("bottom").ticks(20).innerTickSize(-i).outerTickSize(0).tickPadding(10),u=d3.svg.axis().scale(s).orient("left").ticks(15).innerTickSize(-h).outerTickSize(0).tickPadding(10);b(j,t,i,h),c(j,u),j.call(d),f(j,k,a);var v=function(a){return a.role},w=d3.scale.category10();j.append("g").attr("clip-path","url(#clip)").selectAll(".dot").data(k).enter().append("circle").attr("id","chartPoint").attr("r",a.avatar_size/2).attr("transform",m).style("fill",function(a){return"url(#champ_avatar_"+a.key+a.role+")"}).style("stroke",function(a){return w(v(a))}).style("stroke-width","2.5").attr("class",function(a){return a.role}).on("mouseover",d.show).on("mouseout",d.hide),e(k,w);var x=d3.behavior.zoom().x(r).y(s).scaleExtent([1,a.max_zoom]).on("zoom",l);j.call(x)})},a.changeVisibility=function(a){$("."+a).toggle()};var b=function(a,b,c,d){a.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(b).append("text").attr("class","label").attr("x",d).attr("y",-6).style("text-anchor","end").text("Win (%)")},c=function(a,b){a.append("g").attr("class","y axis").call(b).append("text").attr("class","label").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").style("text-anchor","end").text("Play (%)")},d=d3.tip().attr("class","d3-tip").offset([-10,0]).html(function(a){return"<strong> "+a.key+" "+a.role+" </strong><br><strong>Win %:</strong> <span>"+a.general.winPercent+"</span> <br><strong>Play %:</strong> <span>"+a.general.playPercent+"</span> "}),e=function(a,b){d3.selectAll(".roleBox").data(b.domain()).style("color",b)},f=function(a,b,c){var d=a.append("defs").attr("id","imgdefs");b.forEach(function(a){var b=d.append("pattern").attr("id","champ_avatar_"+a.key+a.role).attr("height",1).attr("width",1).attr("x","0").attr("y","0").attr("class",a.role);b.append("image").attr("x",0).attr("y",0).attr("height",c.avatar_size).attr("width",c.avatar_size).attr("xlink:href","//ddragon.leagueoflegends.com/cdn/"+c.patchVersion+"/img/champion/"+a.key+".png")})}}]),angular.module("imageChartApp").run(["$templateCache",function(a){a.put("views/main.html",'<div class="row"> <div id="chart" class="col-xs-12 col-sm-12 col-md-11 col-lg-11"> </div> <form data-ng-init="init()" class="col-xs-1 col-sm-1 col-md-1 col-lg-1"> <div id="roleCheck"> <div class="checkbox roleBox"> <label><input type="checkbox" checked value="" ng-click="changeVisibility(\'Top\')">Top</label> </div> <div class="checkbox roleBox"> <label><input type="checkbox" checked value="" ng-click="changeVisibility(\'Jungle\')">Jungle</label> </div> <div class="checkbox roleBox"> <label><input type="checkbox" checked value="" ng-click="changeVisibility(\'Middle\')">Middle</label> </div> <div class="checkbox roleBox"> <label><input type="checkbox" checked value="" ng-click="changeVisibility(\'ADC\')">ADC</label> </div> <div class="checkbox roleBox"> <label><input type="checkbox" checked value="" ng-click="changeVisibility(\'Support\')">Support</label> </div> </div> <br> </form> </div>')}]);